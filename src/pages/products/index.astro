---
import Layout from '@/layouts/Layout.astro';
import { Providers } from '@/components/common/Providers';
import HeaderWrapper from '@/components/Header/HeaderWrapper';
import FooterV2 from '@/components/FooterV2';
import ProductsSectionAlt from '@/components/ProductsSectionAlt';
import IndustryHeroBanner from '@/components/industries/IndustryHeroBanner';
import ExperienceBetterBanner from '@/components/ExperienceBetterBanner';
import { getImage } from 'astro:assets';

const currentPath = Astro.url.pathname;

const categories = [
  {
    slug: 'bond',
    image: '/images/homepage-heroes/Forza Bond Hero Shot.webp',
    alt: 'Industrial Adhesives'
  },
  {
    slug: 'seal',
    image: '/images/homepage-heroes/Forza Seal Hero Shot.webp',
    alt: 'Industrial Sealants'
  },
  {
    slug: 'tape',
    image: '/images/homepage-heroes/Forza Tape Hero Shot.webp',
    alt: 'Industrial Tapes'
  },
  {
    slug: 'ruggedred',
    image: '/images/homepage-heroes/Forza-Cleaners-Hero-Shot1.webp',
    alt: 'Industrial Cleaners'
  }
];

const optimizedCategories = await Promise.all(categories.map(async (cat) => {
  try {
    const optimized = await getImage({ src: cat.image, width: 800, format: 'webp' });
    return { ...cat, image: optimized.src };
  } catch (e) {
    return cat;
  }
}));
---

<Layout 
  title="Products - ForzaBuilt Industrial Adhesives, Sealants & Tapes"
  description="Explore ForzaBuilt's complete product line of industrial adhesives, sealants, tapes, and cleaning solutions. Best performing and widest range of industrial products."
  canonicalUrl="/products"
>
  <Providers client:load>
    <div class="bg-white min-h-screen flex flex-col relative overflow-x-hidden">
      <HeaderWrapper currentPath={currentPath} client:load />
      
      <div class="w-full relative">
        <!-- Hero Video Section -->
        <div class="relative">
          <IndustryHeroBanner 
            videoUrl="/videos/backgrounds/WebOptimized/Product Summary Page Video_Optimized.mp4" 
            posterUrl="/images/homepage-heroes/product-summary-hero.webp"
            industryTitle="Our Products"
            variant="simple"
            useTitleCase={true}
            subtitle="Best Performing and Widest Range of Industrial Products"
            client:load
          />
        </div>

        <!-- Products Grid Section -->
        <div class="relative z-[30]">
          <ProductsSectionAlt client:load categories={optimizedCategories} />
        </div>
      </div>

      <!-- Performance Elevated Banner -->
      <ExperienceBetterBanner client:load />
      
      <!-- Footer -->
      <FooterV2 client:load />
    </div>
  </Providers>
</Layout>



